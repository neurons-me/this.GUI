import React, { useEffect } from 'react';
import GuiProvider from '@/gui/Theme/GuiProvider';
import Icon from '@/gui/Theme/Icon/Icon';
import ThemeModeToggle from '@/gui/Theme/ToggleMode/ToggleMode';
import {
  Avatar,
  Box,
  Button,
  Divider,
  IconButton,
  Link,
  List,
  ListItem,
  ListItemButton,
  ListItemIcon,
  ListItemText,
  Paper,
  Stack,
  Grid,
  Switch,
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableRow,
  Tooltip,
  Typography,
} from '@/gui/atoms';
import Card from '@/gui/molecules/Card/Card';
import CardActions from '@/gui/molecules/Card/CardActions/CardActions';
import CardContent from '@/gui/molecules/Card/CardContent/CardContent';
import CardHeader from '@/gui/molecules/Card/CardHeader/CardHeader';
import TextField from '@/gui/atoms/TextField/TextField';
export const EnsureMaterialSymbols = () => {
  useEffect(() => {
    const existing = document.querySelector('link[data-gui-material-symbols="1"]');
    if (existing) return;
    const link = document.createElement('link');
    link.setAttribute('data-gui-material-symbols', '1');
    link.rel = 'stylesheet';
    link.href =
      'https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,400,0,0&display=swap';
    document.head.appendChild(link);
  }, []);

  return null;
};

export default function Home() {
  return (
  <GuiProvider>
  <EnsureMaterialSymbols />
  <Box
    sx={{
      minHeight: '100vh',
      color: 'text.primary',
    }}
  >
    <Box
      component="section"
      sx={{
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        minHeight: '60vh',
        padding: 5,
        textAlign: 'center',
      }}
    >
      <img
        src="GUI.png"
        alt="This.GUI"
        style={{ width: '320px', height: 'auto', imageRendering: 'auto', marginBottom: '14px' }}
      />
      <Typography variant="h2" sx={{ fontWeight: 700, letterSpacing: '-0.04em', mb: 1 }}>
        .GUI
      </Typography>
      <Typography sx={{ maxWidth: 640, fontSize: '1.1rem', lineHeight: 1.4, mb: 3 }}>
        Designed by neurons.me in Veracruz.
      </Typography>
      <Stack direction={{ xs: 'column', sm: 'row' }} spacing={1.5}>
        <Button 
        variant="contained" 
        color="primary" 
        startIcon={<Icon name="widgets" />} 
        component={Link} 
        href="https://neurons-me.github.io/this.GUI">
          window.GUI 
        </Button>

       <Button
  variant="outlined"
  color="secondary"
  component={Link}
  href="https://neurons.me"
  startIcon={
    <img
      src="https://res.cloudinary.com/dkwnxf6gm/image/upload/v1760629056/neurons-grey_hxjcom.png"
      alt="neurons.me"
      width={32}
      height={34}
      style={{ opacity: 0.9, filter: 'grayscale(1)' }}
    />
  }
>
  neurons.me
</Button>
      </Stack>
    </Box>

    <Box component="section" sx={{ px: { xs: 2, md: 4 }, pb: 6 }}>
      <Typography variant="h4" sx={{ mb: 2 }}>
        Layout preview
      </Typography>
      <Paper variant="outlined" sx={{ overflow: 'hidden', borderRadius: 2 }}>
        <Box
          sx={{
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'space-between',
            px: 2,
            py: 1,
            backgroundColor: 'background.nav',
            borderBottom: '1px solid',
            borderColor: 'divider',
          }}
        >
          <Stack direction="row" spacing={1} alignItems="center">
            <Avatar sx={{ width: 28, height: 28 }}>G</Avatar>
            <Typography variant="subtitle2">TopBar</Typography>
          </Stack>
          <Stack direction="row" spacing={1} alignItems="center">
            <IconButton size="small">
              <Icon name="search" />
            </IconButton>
            <ThemeModeToggle variant="minimal" show="icons" iconSize="small" />
          </Stack>
        </Box>
        <Box
          sx={{
            display: 'grid',
            gridTemplateColumns: '72px 1fr 68px',
            minHeight: 220,
          }}
        >
          <Box
            sx={{
              borderRight: '1px solid',
              borderColor: 'divider',
              py: 2,
              px: 1,
              display: 'flex',
              flexDirection: 'column',
              gap: 1,
              alignItems: 'center',
              backgroundColor: 'background.nav',
            }}
          >
            {['dashboard', 'hub', 'bolt', 'settings'].map((name) => (
              <IconButton key={name} size="small">
                <Icon name={name} />
              </IconButton>
            ))}
          </Box>
          <Box sx={{ p: 2, display: 'grid', gap: 1.5 }}>
            <Typography variant="subtitle1">Content</Typography>
            <Card variant="outlined">
              <CardHeader title="Hero / Page" subheader="Core molecules" />
              <CardContent>
                <Typography variant="body2" sx={{ opacity: 0.8 }}>
                  Compose sections with Cards, Grids, and layout-aware spacing.
                </Typography>
              </CardContent>
              <CardActions>
                <Button size="small">Action</Button>
                <Button size="small" variant="outlined">
                  Secondary
                </Button>
              </CardActions>
            </Card>
          </Box>
          <Box
            sx={{
              borderLeft: '1px solid',
              borderColor: 'divider',
              py: 2,
              px: 1,
              display: 'flex',
              flexDirection: 'column',
              gap: 1,
              alignItems: 'center',
              backgroundColor: 'background.nav',
            }}
          >
            <Tooltip title="Right sidebar">
              <IconButton size="small">
                <Icon name="insights" />
              </IconButton>
            </Tooltip>
            <Tooltip title="Notifications">
              <IconButton size="small">
                <Icon name="notifications" />
              </IconButton>
            </Tooltip>
          </Box>
        </Box>
        <Box
          sx={{
            px: 2,
            py: 1,
            borderTop: '1px solid',
            borderColor: 'divider',
            backgroundColor: 'background.nav',
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
          }}
        >
          <Typography variant="caption">Footer</Typography>
          <Stack direction="row" spacing={1} alignItems="center">
            <Link href="https://neurons.me" underline="hover">
              Docs
            </Link>
            <Divider orientation="vertical" flexItem />
            <Link href="https://neurons.me" underline="hover">
              Support
            </Link>
          </Stack>
        </Box>
      </Paper>
    </Box>

    <Box component="section" sx={{ px: { xs: 2, md: 4 }, pb: 8 }}>
      <Typography variant="h4" sx={{ mb: 2 }}>
        Component sampler
      </Typography>
      <Box
        sx={{
          display: 'grid',
          gap: 2,
        gridTemplateColumns: { xs: '1fr', md: 'repeat(2, minmax(0, 1fr))' },
      }}
    >
        <Card variant="outlined">
          <CardHeader title="Buttons & actions" />
          <CardContent>
            <Stack direction="row" spacing={1} flexWrap="wrap">
              <Button variant="contained" startIcon={<Icon name="auto_awesome" />}>
                Primary
              </Button>
              <Button variant="outlined" color="secondary">
                Outline
              </Button>
              <IconButton size="small" color="primary">
                <Icon name="favorite" />
              </IconButton>
              <Tooltip title="IconButton + Tooltip">
                <IconButton size="small">
                  <Icon name="bolt" />
                </IconButton>
              </Tooltip>
            </Stack>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Inputs & toggles" />
          <CardContent>
            <Stack spacing={1.5}>
              <TextField size="small" label="Search" placeholder="Type a query" />
              <Stack direction="row" spacing={1} alignItems="center">
                <Switch defaultChecked />
                <Typography variant="body2">Notifications</Typography>
              </Stack>
            </Stack>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Lists & navigation" />
          <CardContent>
            <List dense>
              {[
                { label: 'Overview', icon: 'dashboard' },
                { label: 'Experiments', icon: 'science' },
                { label: 'Models', icon: 'memory' },
              ].map((item) => (
                <ListItem key={item.label} disablePadding>
                  <ListItemButton>
                    <ListItemIcon>
                      <Icon name={item.icon} />
                    </ListItemIcon>
                    <ListItemText primary={item.label} />
                  </ListItemButton>
                </ListItem>
              ))}
            </List>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Grid layouts" />
          <CardContent>
            <Grid container spacing={1.5}>
              {[1, 2, 3, 4].map((i) => (
                <Grid item xs={6} md={3} key={i}>
                  <Paper
                    variant="outlined"
                    sx={{
                      p: 1.5,
                      textAlign: 'center',
                      borderStyle: 'dashed',
                      borderColor: 'divider',
                      backgroundColor: 'background.paper',
                    }}
                  >
                    <Typography variant="caption">Grid cell {i}</Typography>
                  </Paper>
                </Grid>
              ))}
            </Grid>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Avatars & tooltips" />
          <CardContent>
            <Stack spacing={1.5}>
              <Stack direction="row" spacing={1}>
                {['A', 'B', 'C', 'D'].map((label) => (
                  <Tooltip title={`User ${label}`} key={label}>
                    <Avatar sx={{ width: 32, height: 32 }}>{label}</Avatar>
                  </Tooltip>
                ))}
              </Stack>
              <Stack direction="row" spacing={1}>
                {['info', 'favorite', 'bolt'].map((name) => (
                  <Tooltip title={name} key={name}>
                    <IconButton size="small" color="primary">
                      <Icon name={name} />
                    </IconButton>
                  </Tooltip>
                ))}
              </Stack>
            </Stack>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Data display" />
          <CardContent>
            <Stack spacing={1.5}>
              <Stack direction="row" spacing={1} alignItems="center">
                <Avatar sx={{ width: 32, height: 32 }}>A</Avatar>
                <Typography variant="body2">Avatar + Typography</Typography>
              </Stack>
              <Table size="small">
                <TableHead>
                  <TableRow>
                    <TableCell>Signal</TableCell>
                    <TableCell align="right">Score</TableCell>
                  </TableRow>
                </TableHead>
                <TableBody>
                  {[
                    { label: 'Attention', score: '0.92' },
                    { label: 'Recall', score: '0.86' },
                  ].map((row) => (
                    <TableRow key={row.label}>
                      <TableCell>{row.label}</TableCell>
                      <TableCell align="right">{row.score}</TableCell>
                    </TableRow>
                  ))}
                </TableBody>
              </Table>
            </Stack>
          </CardContent>
        </Card>
      </Box>
    </Box>

    <Box component="section" sx={{ px: { xs: 2, md: 4 }, pb: 8 }}>
      <Typography variant="h4" sx={{ mb: 2 }}>
        Patterns
      </Typography>
      <Typography variant="body2" sx={{ maxWidth: 860, opacity: 0.85, mb: 2 }}>
        Quick, copy/paste-friendly examples of common patterns used across This.GUI.
      </Typography>

      <Box
        sx={{
          display: 'grid',
          gap: 2,
          gridTemplateColumns: { xs: '1fr', md: 'repeat(2, minmax(0, 1fr))' },
        }}
      >
        <Card variant="outlined">
          <CardHeader title="Icon + tokens" subheader="Material Symbols + GUI CSS vars" />
          <CardContent>
            <Stack spacing={1.25}>
              <Typography variant="body2" sx={{ opacity: 0.8 }}>
                Icons come from Material Symbols. Colors typically use GUI tokens like{' '}
                <code>var(--gui-primary)</code>.
              </Typography>
              <Stack direction="row" spacing={1} alignItems="center" flexWrap="wrap">
                <Icon name="auto_awesome" style={{ color: 'var(--gui-primary)' }} />
                <Icon name="insights" style={{ color: 'var(--gui-info)' }} />
                <Icon name="warning" style={{ color: 'var(--gui-warning)' }} />
                <Icon name="error" style={{ color: 'var(--gui-error)' }} />
                <Typography variant="caption" sx={{ opacity: 0.7 }}>
                  (These are just icons + tokens — minimal + readable.)
                </Typography>
              </Stack>
            </Stack>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Actions + feedback" subheader="Tooltip, loading, disabled" />
          <CardContent>
            <Stack spacing={1.25}>
              <Typography variant="body2" sx={{ opacity: 0.8 }}>
                Common micro-interactions: tooltip hints, disabled states, and icon-first actions.
              </Typography>
              <Stack direction="row" spacing={1} flexWrap="wrap" alignItems="center">
                <Tooltip title="Primary action">
                  <span>
                    <Button variant="contained" startIcon={<Icon name="bolt" />}>
                      Run
                    </Button>
                  </span>
                </Tooltip>
                <Button variant="outlined" disabled startIcon={<Icon name="lock" />}>
                  Restricted
                </Button>
                <Tooltip title="Copy">
                  <IconButton size="small">
                    <Icon name="content_copy" />
                  </IconButton>
                </Tooltip>
                <Tooltip title="Open">
                  <IconButton size="small">
                    <Icon name="open_in_new" />
                  </IconButton>
                </Tooltip>
              </Stack>
            </Stack>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Navigation row" subheader="Link + secondary text" />
          <CardContent>
            <List dense>
              {[
                { label: 'Docs', icon: 'menu_book', hint: 'Read the component guides' },
                { label: 'Storybook', icon: 'auto_stories', hint: 'Browse atoms → organisms' },
                { label: 'GitHub', icon: 'code', hint: 'Source + issues + PRs' },
              ].map((item) => (
                <ListItem key={item.label} disablePadding>
                  <ListItemButton>
                    <ListItemIcon>
                      <Icon name={item.icon} />
                    </ListItemIcon>
                    <ListItemText primary={item.label} secondary={item.hint} />
                  </ListItemButton>
                </ListItem>
              ))}
            </List>
          </CardContent>
        </Card>

        <Card variant="outlined">
          <CardHeader title="Declarative layout (mental model)" subheader="Think: config → shell" />
          <CardContent>
            <Typography variant="body2" sx={{ opacity: 0.8, mb: 1.25 }}>
              Most UI in This.GUI can be expressed as a config object that maps to components.
              (Storybook stories are a great place to see what props matter.)
            </Typography>
            <Paper variant="outlined" sx={{ p: 1.25, borderRadius: 2, backgroundColor: 'background.nav' }}>
              <Typography
                component="pre"
                sx={{
                  m: 0,
                  fontFamily: 'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',
                  fontSize: 12,
                  lineHeight: 1.4,
                  whiteSpace: 'pre-wrap',
                  color: 'text.primary',
                }}
              >{`{
  "type": "Layout",
  "props": {
    "topBarConfig": { "title": "Workspace" },
    "leftSidebarConfig": {
      "elements": [
        { "type": "link", "props": { "label": "Dashboard", "icon": "dashboard" } },
        { "type": "link", "props": { "label": "Insights", "icon": "insights" } }
      ]
    }
  }
}`}</Typography>
            </Paper>
          </CardContent>
        </Card>
      </Box>
    </Box>

    <Box component="section" sx={{ px: { xs: 2, md: 4 }, pb: 10 }}>
      <Typography variant="h4" sx={{ mb: 2 }}>
        How to navigate Storybook
      </Typography>

      <Card variant="outlined">
        <CardContent>
          <Stack spacing={1.25} sx={{ maxWidth: 980 }}>
            <Typography variant="body2" sx={{ opacity: 0.85 }}>
              Storybook is the fastest way to learn the surface area of This.GUI.
            </Typography>

            <List dense sx={{ pl: 1 }}>
              <ListItem>
                <ListItemIcon>
                  <Icon name="search" />
                </ListItemIcon>
                <ListItemText
                  primary="Use the left search to find components"
                  secondary="Try: Layout, TopBar, LeftSidebar, Page, Button, Card"
                />
              </ListItem>
              <ListItem>
                <ListItemIcon>
                  <Icon name="tune" />
                </ListItemIcon>
                <ListItemText
                  primary="Open Controls to tweak props live"
                  secondary="Most stories expose the important props via Storybook controls."
                />
              </ListItem>
              <ListItem>
                <ListItemIcon>
                  <Icon name="description" />
                </ListItemIcon>
                <ListItemText
                  primary="Use the Docs tab for intent + examples"
                  secondary="Docs explain what a component is for, not just how to render it."
                />
              </ListItem>
              <ListItem>
                <ListItemIcon>
                  <Icon name="open_in_full" />
                </ListItemIcon>
                <ListItemText
                  primary="Use fullscreen / responsive mode"
                  secondary="Layout + Sidebars are best evaluated across multiple widths."
                />
              </ListItem>
            </List>

            <Divider />

            <Typography variant="subtitle2" sx={{ fontWeight: 700 }}>
              This.GUI architecture (high-level)
            </Typography>
            <Typography variant="body2" sx={{ opacity: 0.85 }}>
              This.GUI is organized as a composable UI system:
            </Typography>
            <List dense sx={{ pl: 1 }}>
              <ListItem>
                <ListItemIcon>
                  <Icon name="widgets" />
                </ListItemIcon>
                <ListItemText
                  primary="Atoms → Molecules → Organisms"
                  secondary="Start small (Button, Box), combine into patterns (Card, Page), then full sections/shells (Layout)."
                />
              </ListItem>
              <ListItem>
                <ListItemIcon>
                  <Icon name="palette" />
                </ListItemIcon>
                <ListItemText
                  primary="Theme + tokens"
                  secondary="Design stays consistent via theme values + CSS vars (e.g. --gui-primary)."
                />
              </ListItem>
              <ListItem>
                <ListItemIcon>
                  <Icon name="space_dashboard" />
                </ListItemIcon>
                <ListItemText
                  primary="Layout shell"
                  secondary="TopBar / Sidebars / Footer cooperate by updating insets so content aligns automatically."
                />
              </ListItem>
              <ListItem>
                <ListItemIcon>
                  <Icon name="route" />
                </ListItemIcon>
                <ListItemText
                  primary="Routing + registries"
                  secondary="QRouter / QRegistry are the glue for declarative navigation and component lookup across namespaces."
                />
              </ListItem>
              <ListItem>
                <ListItemIcon>
                  <Icon name="handshake" />
                </ListItemIcon>
                <ListItemText
                  primary="Contexts + hooks"
                  secondary="Providers establish shared state (sidebar view, theme mode). Hooks read/write that state cleanly."
                />
              </ListItem>
            </List>

            <Typography variant="caption" sx={{ opacity: 0.7 }}>
              Tip: If something looks wrong, jump to the matching story under Layout / Sidebars / Theme — it’s the source of truth for intended behavior.
            </Typography>
          </Stack>
        </CardContent>
      </Card>
    </Box>
  </Box>
    </GuiProvider>
  );
}

<Home />
